<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Growth Multiple & CAGR Calculator</title>
<style>
  :root{
    --brand:#009356; --ink:#263643; --bg:#f6faf7; --card:#ffffff;
    --soft:#eef3f0; --note:#6b7a86;
    --radius:20px; --shadow:0 14px 40px rgba(0,0,0,.08);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--ink);
    background:radial-gradient(900px 500px at 110% -10%, #dff7ea 0, transparent 60%), var(--bg);
  }
  .wrap{max-width:1120px;margin:56px auto;padding:0 20px}
  .header{display:flex;justify-content:space-between;align-items:center;gap:14px;flex-wrap:wrap;margin-bottom:20px}
  .title{font-weight:800;letter-spacing:.2px;line-height:1.15;font-size:clamp(22px,2.4vw,36px)}
  .badge{background:linear-gradient(90deg,var(--brand),#18a06d);color:#fff;padding:10px 14px;border-radius:999px;font-weight:700;box-shadow:0 8px 26px rgba(0,147,86,.25)}
  .grid{display:grid;gap:24px;grid-template-columns:1.05fr .95fr}
  @media (max-width:980px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px 22px}
  .card h3{margin:0 0 18px;font-size:18px}

  .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media (max-width:680px){.row{grid-template-columns:1fr}}

  label{display:block;font-size:12px;color:var(--note);margin:0 0 6px;font-weight:700;letter-spacing:.3px;text-transform:uppercase}
  input, select{
    width:100%;padding:16px 14px;border-radius:14px;border:1px solid #e6ece8;background:#fff;
    outline:none;font-size:16px;line-height:1.2;transition:border-color .2s,box-shadow .2s;
  }
  input:focus, select:focus{border-color:var(--brand);box-shadow:0 0 0 5px rgba(0,147,86,.13)}
  .pillbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .pill{background:#e9f7f0;color:var(--brand);border:1px dashed rgba(0,147,86,.45);padding:8px 10px;border-radius:999px;font-size:12px;cursor:pointer}
  .pill:hover{filter:brightness(.97)}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  button{border:0;padding:13px 16px;border-radius:12px;font-weight:800;cursor:pointer}
  .primary{background:var(--brand);color:#fff}
  .ghost{background:#eff5f1;color:var(--ink)}

  /* Results – airy + micro-animations */
  .stack{display:grid;gap:18px}
  .hero{
    padding:26px;border:1px solid var(--soft);border-radius:18px;background:linear-gradient(180deg,#fff,#f9fdfb);
    display:flex;gap:22px;align-items:center;justify-content:space-between;flex-wrap:wrap;
  }
  .big{font-size:clamp(26px,3vw,38px);font-weight:900;letter-spacing:.2px}
  .sub{color:var(--note);font-size:14px;margin-top:6px}

  .times-badge{
    --pulse: scale(1);
    transform: var(--pulse);
    transition: transform .45s cubic-bezier(.2,.7,.2,1);
    background:#0f7f5a10;border:1px solid #0f7f5a30;color:#0d5b44;
    padding:12px 16px;border-radius:999px;font-weight:900;font-size:18px;min-width:140px;text-align:center;
  }

  .kpi{display:grid;gap:18px;grid-template-columns:repeat(3,1fr)}
  @media (max-width:880px){.kpi{grid-template-columns:1fr}}
  .kpi .box{padding:22px;border:1px solid var(--soft);border-radius:18px;background:#fff}
  .kpi .label{font-size:12px;color:var(--note);text-transform:uppercase;letter-spacing:.3px;font-weight:800;margin-bottom:6px}
  .kpi .value{font-size:clamp(22px,2.2vw,30px);font-weight:900}
  .kpi .hint{color:var(--note);font-size:13px;margin-top:6px}

  .note{margin-top:6px;font-size:12px;color:var(--note)}
  .fade-in{opacity:0;transform:translateY(4px);animation:fade .5s ease forwards}
  @keyframes fade{to{opacity:1;transform:none}}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="title">Growth Multiple & CAGR Calculator</div>
    <div class="badge">Clean · Indian Format · Live</div>
  </div>

  <div class="grid">
    <!-- Inputs -->
    <div class="card">
      <h3>Inputs</h3>

      <div class="row">
        <div>
          <label for="amount">Amount Invested (₹)</label>
          <input id="amount" type="text" inputmode="decimal" placeholder="1,00,000" value="1,00,000" />
          <div class="pillbar" aria-label="quick amounts">
            <span class="pill" data-amt="1,00,000">₹1 L</span>
            <span class="pill" data-amt="5,00,000">₹5 L</span>
            <span class="pill" data-amt="10,00,000">₹10 L</span>
          </div>
        </div>

        <div>
          <label for="presets">Load Example (optional)</label>
          <select id="presets">
            <option value="">— None —</option>
            <option value="sensex">Sensex</option>
            <option value="gold">Gold per 10g</option>
            <option value="fd">FD Index</option>
            <option value="re">Real Estate psf</option>
          </select>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div>
          <label for="startYear">Start Year</label>
          <input id="startYear" type="number" min="1900" max="2100" value="1979" />
        </div>
        <div>
          <label for="startVal">Value at Start Year</label>
          <input id="startVal" type="text" inputmode="decimal" value="100" />
          <div class="note">Index level / price / psf etc.</div>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="endYear">End Year</label>
          <input id="endYear" type="number" min="1900" max="2100" value="2025" />
        </div>
        <div>
          <label for="endVal">Value at End Year</label>
          <input id="endVal" type="text" inputmode="decimal" value="82,408" />
        </div>
      </div>

      <div class="actions">
        <button class="primary" id="recalc">Recalculate</button>
        <button class="ghost" id="reset">Reset</button>
      </div>
      <div class="note">Inputs auto-format to Indian commas. End year must be &gt; start year.</div>
    </div>

    <!-- Outputs -->
    <div class="card" aria-live="polite">
      <h3>Results</h3>

      <div class="stack">
        <div class="hero fade-in">
          <div>
            <div class="big" id="finalAmt">—</div>
            <div class="sub" id="metaLine">Enter values to calculate</div>
          </div>
          <div class="times-badge" id="timesBadge">—×</div>
        </div>

        <div class="kpi fade-in" style="animation-delay:.08s">
          <div class="box">
            <div class="label">CAGR</div>
            <div class="value" id="cagr">—</div>
            <div class="hint">Annualised return</div>
          </div>
          <div class="box">
            <div class="label">Growth ×</div>
            <div class="value" id="multiple">—</div>
            <div class="hint">End ÷ Start</div>
          </div>
          <div class="box">
            <div class="label">Absolute Gain</div>
            <div class="value" id="gain">—</div>
            <div class="hint">Final − Amount Invested</div>
          </div>
        </div>

        <div class="note fade-in" style="animation-delay:.15s">Assumes straight-line CAGR over full years between start and end.</div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  // ---------- Indian number formatting ----------
  const fmt0 = new Intl.NumberFormat('en-IN', { maximumFractionDigits: 0 });
  const fmt2 = new Intl.NumberFormat('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

  function formatINRString(str){
    if (str === '' || str === null || str === undefined) return '';
    str = String(str).replace(/[^0-9.]/g,'');
    const parts = str.split('.');
    const int = parts[0].replace(/^0+(?=\d)/,'');
    const dec = parts[1] ? '.' + parts[1].slice(0,6) : '';
    let x = int;
    if (x.length > 3){
      const head = x.slice(0, x.length - 3);
      const tail = x.slice(-3);
      const headGrouped = head.replace(/\B(?=(\d{2})+(?!\d))/g, ',');
      x = headGrouped + ',' + tail;
    }
    return (x || '0') + dec;
  }
  const parseINR = s => parseFloat(String(s||'0').replace(/,/g,'')) || 0;

  function bindINRInput(el){
    const format = () => {
      const posEnd = el.selectionEnd;
      const beforeLen = el.value.length;
      el.value = formatINRString(el.value);
      const delta = el.value.length - beforeLen;
      el.setSelectionRange(posEnd + delta, posEnd + delta);
      compute();
    };
    el.addEventListener('input', format);
    el.addEventListener('blur', format);
  }

  // ---------- Elements ----------
  const $ = id => document.getElementById(id);
  const f = {
    amount: $('amount'),
    startYear: $('startYear'),
    startVal: $('startVal'),
    endYear: $('endYear'),
    endVal: $('endVal'),
    presets: $('presets')
  };
  const o = {
    finalAmt: $('finalAmt'),
    meta: $('metaLine'),
    badge: $('timesBadge'),
    cagr: $('cagr'),
    multiple: $('multiple'),
    gain: $('gain')
  };

  // Bind INR formatting
  [f.amount, f.startVal, f.endVal].forEach(bindINRInput);

  // Quick amount pills
  document.querySelectorAll('.pill[data-amt]').forEach(p=>{
    p.addEventListener('click', ()=>{ f.amount.value = p.dataset.amt; compute(); });
  });

  // Presets
  f.presets.addEventListener('change', e=>{
    const v = e.target.value;
    const map = {
      sensex:{ y0:1979, v0:"100", y1:2025, v1:"82,408" },
      gold:{ y0:1979, v0:"937", y1:2025, v1:"1,01,405" },
      fd:{ y0:1979, v0:"100", y1:2025, v1:"3,447" },
      re:{ y0:1979, v0:"700", y1:2025, v1:"2,00,000" },
    };
    if(map[v]){
      f.startYear.value = map[v].y0;
      f.startVal.value  = map[v].v0;
      f.endYear.value   = map[v].y1;
      f.endVal.value    = map[v].v1;
      compute(true);
    }
  });

  // Buttons
  $('recalc').addEventListener('click', ()=>compute(true));
  $('reset').addEventListener('click', ()=>{
    f.amount.value = "1,00,000";
    f.startYear.value = 1979;
    f.startVal.value = "100";
    f.endYear.value = 2025;
    f.endVal.value = "82,408";
    f.presets.value = "";
    compute(true);
  });

  // Live compute
  [f.amount, f.startYear, f.startVal, f.endYear, f.endVal].forEach(el=>{
    el.addEventListener('input', ()=>compute());
  });

  // ---------- Micro-animation helpers ----------
  function tweenNumber(el, to, opts={}){
    const {suffix='', ms=650, decimals=0, formatter} = opts;
    const from = +(el.getAttribute('data-last') || 0);
    const start = performance.now();
    function easeOutCubic(t){ return 1 - Math.pow(1-t, 3); }
    function step(ts){
      const k = Math.min(1, (ts - start)/ms);
      const val = from + (to - from) * easeOutCubic(k);
      let text;
      if (formatter) text = formatter(val);
      else text = (decimals? val.toFixed(decimals) : Math.round(val).toString());
      el.textContent = text + suffix;
      if (k < 1) requestAnimationFrame(step); else el.setAttribute('data-last', to);
    }
    requestAnimationFrame(step);
  }

  function pulse(el){
    el.style.setProperty('--pulse','scale(1.06)');
    setTimeout(()=>el.style.setProperty('--pulse','scale(1)'), 320);
  }

  // ---------- Core compute ----------
  function compute(withPulse=false){
    const A  = parseINR(f.amount.value);
    const y0 = +f.startYear.value || 0;
    const y1 = +f.endYear.value   || 0;
    const v0 = parseINR(f.startVal.value);
    const v1 = parseINR(f.endVal.value);

    const years = Math.max(0, y1 - y0);
    const valid = (y1 > y0) && v0 > 0 && v1 > 0 && A >= 0;

    if(!valid){
      o.finalAmt.textContent = '—';
      o.meta.textContent = 'Enter valid inputs to calculate';
      o.badge.textContent = '—×';
      o.cagr.textContent = '—';
      o.multiple.textContent = '—';
      o.gain.textContent = '—';
      return;
    }

    const multiple = v1 / v0;
    const cagr = Math.pow(multiple, 1/years) - 1;
    const finalAmt = Math.round(A * multiple);
    const gain = Math.max(0, finalAmt - A);

    // Hero
    tweenNumber(o.finalAmt, finalAmt, {ms:700, formatter:v=>'₹'+fmt0.format(Math.round(v))});
    o.meta.textContent = `₹${fmt0.format(Math.round(A))} · ${y0}→${y1} (${years} yrs) · CAGR ${(cagr*100).toFixed(2)}%`;
    o.badge.textContent = (multiple<10 ? multiple.toFixed(2) : Math.round(multiple)) + '×';
    if(withPulse) pulse(o.badge);

    // KPIs (no repetition of final here)
    o.cagr.textContent = (cagr*100).toFixed(2) + '%';
    o.multiple.textContent = (multiple<10 ? multiple.toFixed(2) : Math.round(multiple)) + '×';
    tweenNumber(o.gain, gain, {ms:650, formatter:v=>'₹'+fmt0.format(Math.round(v))});
  }

  compute(true); // init with pulse
})();
</script>
</body>
</html>