<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Retire Rich – Asset Comparison (Rebuilt)</title>
<style>
  :root{
    --brand:#009356; --ink:#263643; --bg:#f6faf7; --card:#ffffff;
    --soft:#eef3f0; --note:#6b7a86; --red:#b3261e; --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--ink); background:var(--bg);
  }
  .wrap{max-width:1120px;margin:40px auto;padding:0 16px}
  .header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
  .title{font-weight:800;letter-spacing:.2px;line-height:1.15;font-size:clamp(22px,2.4vw,34px)}
  .badge{background:linear-gradient(90deg,var(--brand),#16a06c);color:#fff;padding:10px 14px;border-radius:999px;font-weight:700;box-shadow:0 8px 26px rgba(0,147,86,.22)}

  .grid{display:grid;gap:22px;grid-template-columns:1.05fr .95fr}
  @media (max-width:1020px){.grid{grid-template-columns:1fr}}

  .card{background:var(--card);border:1px solid var(--soft);border-radius:var(--radius);padding:20px 18px}
  .card h3{margin:0 0 14px;font-size:18px}

  .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media (max-width:680px){.row{grid-template-columns:1fr}}
  label{display:block;font-size:12px;color:var(--note);margin:0 0 6px;font-weight:800;letter-spacing:.3px;text-transform:uppercase}
  input, select{
    width:100%;padding:14px 12px;border-radius:12px;border:1px solid #e6ece8;background:#fff;
    outline:none;font-size:16px;line-height:1.2;transition:border-color .2s,box-shadow .2s;
  }
  input:focus, select:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(0,147,86,.12)}
  .pillbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .pill{background:#e9f7f0;color:var(--brand);border:1px dashed rgba(0,147,86,.45);padding:8px 10px;border-radius:999px;font-size:12px;cursor:pointer}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  button{border:0;padding:12px 14px;border-radius:12px;font-weight:800;cursor:pointer}
  .primary{background:var(--brand);color:#fff}
  .ghost{background:#eff5f1;color:var(--ink)}
  .note{margin-top:6px;font-size:12px;color:var(--note)}

  /* Asset inputs grid */
  .assets{display:grid;gap:14px;grid-template-columns:repeat(4,1fr);margin-top:10px}
  @media (max-width:1100px){.assets{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:680px){.assets{grid-template-columns:1fr}}
  .asset{border:1px solid var(--soft);border-radius:14px;padding:12px;background:#fff}
  .asset h5{margin:0 0 6px;font-size:14px;font-weight:900;color:var(--brand)}
  .asset .row{grid-template-columns:1fr 1fr}

  /* Results table */
  .tablewrap{border:1px solid var(--soft);border-radius:16px;overflow:hidden;background:#fff}
  table.comp-table{width:100%;border-collapse:separate;border-spacing:0}
  .comp-table thead th{padding:16px 14px;text-align:center;font-weight:900;color:var(--brand);font-size:18px;border-bottom:1px solid var(--soft)}
  .comp-table thead th:first-child{color:var(--ink);text-align:left}
  .comp-table tbody td{padding:16px 14px;text-align:center;font-weight:800}
  .comp-table tbody td:first-child{font-weight:900;color:var(--ink);text-align:left}
  .comp-table tbody tr:nth-child(odd) td{background:#f9fdfb}
  .error{margin-top:8px;color:#fff;background:var(--red);padding:8px 10px;border-radius:10px;display:none;font-size:13px}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="title">Retire Rich – Asset Comparison</div>
    <div class="badge">Inputs → Table (Live)</div>
  </div>

  <div class="grid">
    <!-- Inputs -->
    <div class="card" id="inputsCard">
      <h3>Inputs</h3>

      <div>
        <label for="amount">Amount Invested (₹)</label>
        <input id="amount" type="text" inputmode="decimal" placeholder="1,00,000" value="1,00,000" />
        <div class="pillbar" aria-label="quick amounts">
          <span class="pill" data-amt="1,00,000">₹1 L</span>
          <span class="pill" data-amt="5,00,000">₹5 L</span>
          <span class="pill" data-amt="10,00,000">₹10 L</span>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label for="startYear">Start Year (same for all)</label>
          <input id="startYear" type="number" min="1900" max="2100" value="1979" />
        </div>
        <div>
          <label for="endYear">End Year (same for all)</label>
          <input id="endYear" type="number" min="1900" max="2100" value="2025" />
        </div>
      </div>

      <div class="assets">
        <div class="asset" data-key="fd">
          <h5>Fixed Deposit</h5>
          <label>Start Value</label>
          <input id="fd_v0" type="text" inputmode="decimal" value="100" />
          <label>End Value</label>
          <input id="fd_v1" type="text" inputmode="decimal" value="3,447" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="fd_tax" type="text" inputmode="decimal" value="30" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="fd_exempt" type="text" inputmode="decimal" value="0" />
            </div>
          </div>
        </div>

        <div class="asset" data-key="gold">
          <h5>Gold (per 10 g)</h5>
          <label>Start Value</label>
          <input id="gold_v0" type="text" inputmode="decimal" value="937" />
          <label>End Value</label>
          <input id="gold_v1" type="text" inputmode="decimal" value="1,27,340" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="gold_tax" type="text" inputmode="decimal" value="20" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="gold_exempt" type="text" inputmode="decimal" value="0" />
            </div>
          </div>
        </div>

        <div class="asset" data-key="re">
          <h5>Real Estate (Per Sq Feet)</h5>
          <label>Start Value</label>
          <input id="re_v0" type="text" inputmode="decimal" value="700" />
          <label>End Value</label>
          <input id="re_v1" type="text" inputmode="decimal" value="2,00,000" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="re_tax" type="text" inputmode="decimal" value="20" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="re_exempt" type="text" inputmode="decimal" value="0" />
            </div>
          </div>
        </div>

        <div class="asset" data-key="sensex">
          <h5>Sensex</h5>
          <label>Start Value</label>
          <input id="sensex_v0" type="text" inputmode="decimal" value="100" />
          <label>End Value</label>
          <input id="sensex_v1" type="text" inputmode="decimal" value="82,408" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="sensex_tax" type="text" inputmode="decimal" value="10" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="sensex_exempt" type="text" inputmode="decimal" value="1,00,000" />
            </div>
          </div>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label for="presets">Load Example</label>
          <select id="presets">
            <option value="">— None —</option>
            <option value="sample_1979_2025">Sample set: 1979–2025</option>
          </select>
        </div>
      </div>

      <div class="actions">
        <button class="primary" id="recalc">Recalculate</button>
        <button class="ghost" id="reset">Reset</button>
      </div>
      <div class="error" id="err"></div>
      <div class="note">Tax is applied once at exit on net gains per asset. You can type plain numbers or with commas.</div>
    </div>

    <!-- Results -->
    <div class="card" aria-live="polite">
      <h3>Results</h3>
      <div class="tablewrap">
        <table class="comp-table" id="compTable">
          <thead>
            <tr>
              <th></th>
              <th>Fixed Deposit</th>
              <th>Gold (per 10 g)</th>
              <th>Real Estate Property (Per Sq Feet)</th>
              <th>Sensex</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="row_y0_label">1979</td>
              <td id="fd_y0">—</td>
              <td id="gold_y0">—</td>
              <td id="re_y0">—</td>
              <td id="sensex_y0">—</td>
            </tr>
            <tr>
              <td id="row_y1_label">2025</td>
              <td id="fd_y1">—</td>
              <td id="gold_y1">—</td>
              <td id="re_y1">—</td>
              <td id="sensex_y1">—</td>
            </tr>
            <tr>
              <td>CAGR</td>
              <td id="fd_cagr">—</td>
              <td id="gold_cagr">—</td>
              <td id="re_cagr">—</td>
              <td id="sensex_cagr">—</td>
            </tr>
            <tr>
              <td>1 Lakh becomes</td>
              <td id="fd_final">—</td>
              <td id="gold_final">—</td>
              <td id="re_final">—</td>
              <td id="sensex_final">—</td>
            </tr>
            <tr>
              <td>Post tax value</td>
              <td id="fd_posttax">—</td>
              <td id="gold_posttax">—</td>
              <td id="re_posttax">—</td>
              <td id="sensex_posttax">—</td>
            </tr>
            <tr>
              <td>Tax paid</td>
              <td id="fd_taxpaid">—</td>
              <td id="gold_taxpaid">—</td>
              <td id="re_taxpaid">—</td>
              <td id="sensex_taxpaid">—</td>
            </tr>
            <tr>
              <td></td>
              <td id="fd_times">—</td>
              <td id="gold_times">—</td>
              <td id="re_times">—</td>
              <td id="sensex_times">—</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="note" style="margin-top:10px">Change any input and the table updates instantly.</div>
    </div>
  </div>
</div>

<script>
(function(){
  // ---------- Utilities ----------
  const $ = (id)=>document.getElementById(id);
  const byId = $;
  const ids = (arr)=>arr.map(byId);
  const fmt0 = new Intl.NumberFormat('en-IN',{maximumFractionDigits:0});
  const fmtPct = (x)=> (isFinite(x)? (x*100).toFixed(2)+' %' : '—');
  const inr = (n)=> '₹' + fmt0.format(Math.round(Math.max(0, n||0)));
  const parseINR = (s)=> {
    if(s==null) return 0;
    const x = String(s).replace(/[^0-9.]/g,'');
    const v = parseFloat(x);
    return isNaN(v)?0:v;
  };
  const parsePct = (s)=>{
    const v = parseFloat(String(s||'').replace(/[^0-9.]/g,''));
    if (isNaN(v)) return 0;
    return Math.max(0, Math.min(100, v)) / 100;
  };
  const set = (id,val)=>{ const el=$(id); if(el) el.textContent = val; };

  // ---------- Inputs ----------
  const f = {
    amount: $('amount'),
    startYear: $('startYear'),
    endYear: $('endYear'),
    presets: $('presets'),
    err: $('err')
  };

  const a = {
    fd:     { v0: $('fd_v0'), v1: $('fd_v1'), tax: $('fd_tax'), exempt: $('fd_exempt') },
    gold:   { v0: $('gold_v0'), v1: $('gold_v1'), tax: $('gold_tax'), exempt: $('gold_exempt') },
    re:     { v0: $('re_v0'), v1: $('re_v1'), tax: $('re_tax'), exempt: $('re_exempt') },
    sensex: { v0: $('sensex_v0'), v1: $('sensex_v1'), tax: $('sensex_tax'), exempt: $('sensex_exempt') }
  };
  const keys = ['fd','gold','re','sensex'];

  // ---------- Compute ----------
  function build(){
    // clear error
    f.err.style.display = 'none'; f.err.textContent = '';

    const A  = parseINR(f.amount.value) || 100000;
    const y0 = +f.startYear.value || 0;
    const y1 = +f.endYear.value   || 0;
    const years = y1 - y0;

    set('row_y0_label', y0? String(y0) : 'Start');
    set('row_y1_label', y1? String(y1) : 'End');

    if(!(years>0)){
      f.err.style.display = 'block';
      f.err.textContent = 'End year must be greater than start year.';
    }

    keys.forEach(k=>{
      const v0 = parseINR(a[k].v0.value);
      const v1 = parseINR(a[k].v1.value);
      const r  = parsePct(a[k].tax.value);
      const ex = parseINR(a[k].exempt.value);

      // echo base values
      set(k+'_y0', v0? fmt0.format(v0) : '—');
      set(k+'_y1', v1? fmt0.format(v1) : '—');

      if(!(years>0 && v0>0 && v1>0)){
        set(k+'_cagr','—'); set(k+'_final','—'); set(k+'_posttax','—'); set(k+'_taxpaid','—'); set(k+'_times','—');
        return;
      }

      const m = v1 / v0;
      const c = Math.pow(m, 1/years) - 1;
      const F = A * m;
      const gain = Math.max(0, F - A);
      const taxable = Math.max(0, gain - ex);
      const taxAmt = taxable * r;
      const P = Math.max(0, F - taxAmt);

      set(k+'_cagr', fmtPct(c));
      set(k+'_final', inr(F));
      set(k+'_posttax', inr(P));
      set(k+'_taxpaid', inr(taxAmt));
      set(k+'_times', (m<10? m.toFixed(2) : Math.round(m)) + ' Times');
    });
  }

  // ---------- Events ----------
  document.querySelectorAll('.pill').forEach(p=>{
    p.addEventListener('click', ()=>{ f.amount.value = p.getAttribute('data-amt') || f.amount.value; build(); });
  });

  ids(['amount','startYear','endYear']).forEach(el=> el.addEventListener('input', build));
  keys.forEach(k=>{
    ['v0','v1','tax','exempt'].forEach(prop=>{
      a[k][prop].addEventListener('input', build);
    });
  });
  // sanitize tax on blur (keeps only digits and dot)
  keys.forEach(k=>{
    a[k].tax.addEventListener('blur', ()=>{
      const cleaned = String(a[k].tax.value||'').replace(/[^0-9.]/g,'');
      a[k].tax.value = cleaned;
      build();
    });
  });
  $('recalc').addEventListener('click', build);
  $('reset').addEventListener('click', ()=>{
    f.amount.value = '1,00,000';
    f.startYear.value = 1979;
    f.endYear.value = 2025;
    f.presets.value = '';
    a.fd.v0.value='100'; a.fd.v1.value='3,447'; a.fd.tax.value=30; a.fd.exempt.value='0';
    a.gold.v0.value='937'; a.gold.v1.value='1,27,340'; a.gold.tax.value=20; a.gold.exempt.value='0';
    a.re.v0.value='700'; a.re.v1.value='2,00,000'; a.re.tax.value=20; a.re.exempt.value='0';
    a.sensex.v0.value='100'; a.sensex.v1.value='82,408'; a.sensex.tax.value=10; a.sensex.exempt.value='1,00,000';
    build();
  });

  f.presets.addEventListener('change', e=>{
    if(e.target.value==='sample_1979_2025'){
      f.startYear.value = 1979; f.endYear.value = 2025;
      a.fd.v0.value='100'; a.fd.v1.value='3,447'; a.fd.tax.value=30; a.fd.exempt.value='0';
      a.gold.v0.value='937'; a.gold.v1.value='1,27,340'; a.gold.tax.value=20; a.gold.exempt.value='0';
      a.re.v0.value='700'; a.re.v1.value='2,00,000'; a.re.tax.value=20; a.re.exempt.value='0';
      a.sensex.v0.value='100'; a.sensex.v1.value='82,408'; a.sensex.tax.value=10; a.sensex.exempt.value='1,00,000';
      build();
    }
  });

  // ---------- First render ----------
  build();
})();
</script>
</body>
</html>