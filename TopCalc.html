<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Retire Rich – Asset Comparison (Rebuilt)</title>
<style>
  :root{
    --brand:#009356; --ink:#263643; --bg:#f6faf7; --card:#ffffff;
    --soft:#eef3f0; --note:#6b7a86; --red:#b3261e; --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--ink); background:var(--bg);
  }
  .wrap{max-width:1120px;margin:40px auto;padding:0 16px}
  .header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
  .title{font-weight:800;letter-spacing:.2px;line-height:1.15;font-size:clamp(22px,2.4vw,34px)}
  .badge{background:linear-gradient(90deg,var(--brand),#16a06c);color:#fff;padding:10px 14px;border-radius:999px;font-weight:700;box-shadow:0 8px 26px rgba(0,147,86,.22)}

  .grid{display:grid;gap:22px;grid-template-columns:minmax(0,1.05fr) minmax(0,.95fr)}
  @media (max-width:1020px){.grid{grid-template-columns:1fr}}

  .card{background:var(--card);border:1px solid var(--soft);border-radius:var(--radius);padding:20px 18px}
  .card h3{margin:0 0 14px;font-size:18px}

  .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media (max-width:680px){.row{grid-template-columns:1fr}}
  label{display:block;font-size:12px;color:var(--note);margin:0 0 6px;font-weight:800;letter-spacing:.3px;text-transform:uppercase}
  input, select{
    width:100%;padding:14px 12px;border-radius:12px;border:1px solid #e6ece8;background:#fff;
    outline:none;font-size:16px;line-height:1.2;transition:border-color .2s,box-shadow .2s;
  }
  input:focus, select:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(0,147,86,.12)}
  .pillbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .pill{background:#e9f7f0;color:var(--brand);border:1px dashed rgba(0,147,86,.45);padding:8px 10px;border-radius:999px;font-size:12px;cursor:pointer}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  button{border:0;padding:12px 14px;border-radius:12px;font-weight:800;cursor:pointer}
  .primary{background:var(--brand);color:#fff}
  .ghost{background:#eff5f1;color:var(--ink)}
  .note{margin-top:6px;font-size:12px;color:var(--note)}

  /* Asset inputs grid */
  .assets{display:grid;gap:14px;grid-template-columns:repeat(4,1fr);margin-top:10px}
  @media (max-width:1100px){.assets{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:680px){.assets{grid-template-columns:1fr}}
  .asset{border:1px solid var(--soft);border-radius:14px;padding:12px;background:#fff}
  .asset h5{margin:0 0 6px;font-size:14px;font-weight:900;color:var(--brand)}
  .asset .row{grid-template-columns:1fr 1fr}

  /* Results grid */
  .results-meta{display:flex;flex-wrap:wrap;gap:8px;margin:0 0 16px}
  .pill-label{padding:8px 12px;border-radius:999px;border:1px solid var(--soft);font-size:13px;font-weight:700;color:var(--ink);background:#f8fbf9}
  .pill-label strong{color:var(--brand)}
  .result-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
  .result-card{border:1px solid var(--soft);border-radius:16px;padding:16px;background:#fff;box-shadow:0 8px 20px rgba(38,54,67,.05);display:flex;flex-direction:column;min-height:220px}
  .result-card h4{margin:0;font-size:18px;color:var(--brand)}
  .metrics{margin-top:14px;display:grid;gap:10px}
  .metric{display:flex;justify-content:space-between;font-weight:700;font-size:14px;color:var(--ink)}
  .metric span{color:var(--note);font-size:12px;text-transform:uppercase;letter-spacing:.2px;font-weight:800}
  .metric b{font-size:16px;color:var(--ink)}
  .divider{height:1px;background:var(--soft);margin:10px 0}
  .error{margin-top:8px;color:#fff;background:var(--red);padding:8px 10px;border-radius:10px;display:none;font-size:13px}

  @media (max-width:720px){
    .grid{gap:18px}
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="title">Retire Rich – Asset Comparison</div>
    <div class="badge">Inputs → Table (Live)</div>
  </div>

  <div class="grid">
    <!-- Inputs -->
    <div class="card" id="inputsCard">
      <h3>Inputs</h3>

      <div>
        <label for="amount">Amount Invested (₹)</label>
        <input id="amount" type="text" inputmode="decimal" placeholder="1,00,000" value="1,00,000" />
        <div class="pillbar" aria-label="quick amounts">
          <span class="pill" data-amt="1,00,000">₹1 L</span>
          <span class="pill" data-amt="5,00,000">₹5 L</span>
          <span class="pill" data-amt="10,00,000">₹10 L</span>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label for="startYear">Start Year (same for all)</label>
          <input id="startYear" type="number" min="1900" max="2100" value="1979" />
        </div>
        <div>
          <label for="endYear">End Year (same for all)</label>
          <input id="endYear" type="number" min="1900" max="2100" value="2025" />
        </div>
      </div>

      <div class="assets">
        <div class="asset" data-key="fd">
          <h5>Fixed Deposit</h5>
          <label>Start Value</label>
          <input id="fd_v0" type="text" inputmode="decimal" value="100" />
          <label>End Value</label>
          <input id="fd_v1" type="text" inputmode="decimal" value="3,447" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="fd_tax" type="text" inputmode="decimal" value="30" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="fd_exempt" type="text" inputmode="decimal" value="0" />
            </div>
          </div>
        </div>

        <div class="asset" data-key="gold">
          <h5>Gold (per 10 g)</h5>
          <label>Start Value</label>
          <input id="gold_v0" type="text" inputmode="decimal" value="937" />
          <label>End Value</label>
          <input id="gold_v1" type="text" inputmode="decimal" value="1,27,340" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="gold_tax" type="text" inputmode="decimal" value="20" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="gold_exempt" type="text" inputmode="decimal" value="0" />
            </div>
          </div>
        </div>

        <div class="asset" data-key="re">
          <h5>Real Estate (Per Sq Feet)</h5>
          <label>Start Value</label>
          <input id="re_v0" type="text" inputmode="decimal" value="700" />
          <label>End Value</label>
          <input id="re_v1" type="text" inputmode="decimal" value="2,00,000" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="re_tax" type="text" inputmode="decimal" value="20" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="re_exempt" type="text" inputmode="decimal" value="0" />
            </div>
          </div>
        </div>

        <div class="asset" data-key="sensex">
          <h5>Sensex</h5>
          <label>Start Value</label>
          <input id="sensex_v0" type="text" inputmode="decimal" value="100" />
          <label>End Value</label>
          <input id="sensex_v1" type="text" inputmode="decimal" value="82,408" />
          <div class="row" style="margin-top:6px">
            <div>
              <label>Tax %</label>
              <input id="sensex_tax" type="text" inputmode="decimal" value="10" />
            </div>
            <div>
              <label>Exemption (₹)</label>
              <input id="sensex_exempt" type="text" inputmode="decimal" value="1,00,000" />
            </div>
          </div>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label for="presets">Load Example</label>
          <select id="presets">
            <option value="">— None —</option>
            <option value="sample_1979_2025">Sample set: 1979–2025</option>
          </select>
        </div>
      </div>

      <div class="actions">
        <button class="primary" id="recalc">Recalculate</button>
        <button class="ghost" id="reset">Reset</button>
      </div>
      <div class="error" id="err"></div>
      <div class="note">Tax is applied once at exit on net gains per asset. You can type plain numbers or with commas.</div>
    </div>

    <!-- Results -->
    <div class="card" aria-live="polite">
      <h3>Results</h3>
      <div class="results-meta">
        <div class="pill-label">Start Year: <strong id="row_y0_label">1979</strong></div>
        <div class="pill-label">End Year: <strong id="row_y1_label">2025</strong></div>
        <div class="pill-label">Investment: <strong id="amount_label">₹1,00,000</strong></div>
      </div>
      <div class="result-grid" id="resultGrid" aria-live="polite"></div>
      <div class="note" style="margin-top:10px">Change any input and the table updates instantly.</div>
    </div>
  </div>
</div>

<script>
(function(){
  // ---------- Utilities ----------
  const $ = (id)=>document.getElementById(id);
  const byId = $;
  const ids = (arr)=>arr.map(byId);
  const fmt0 = new Intl.NumberFormat('en-IN',{maximumFractionDigits:0});
  const fmtPct = (x)=> (isFinite(x)? (x*100).toFixed(2)+' %' : '—');
  const inr = (n)=> '₹' + fmt0.format(Math.round(Math.max(0, n||0)));
  const parseINR = (s)=> {
    if(s==null) return 0;
    const x = String(s).replace(/[^0-9.]/g,'');
    const v = parseFloat(x);
    return isNaN(v)?0:v;
  };
  const parsePct = (s)=>{
    const v = parseFloat(String(s||'').replace(/[^0-9.]/g,''));
    if (isNaN(v)) return 0;
    return Math.max(0, Math.min(100, v)) / 100;
  };
  const set = (id,val)=>{ const el=$(id); if(el) el.textContent = val; };

  // ---------- Inputs ----------
  const f = {
    amount: $('amount'),
    startYear: $('startYear'),
    endYear: $('endYear'),
    presets: $('presets'),
    err: $('err')
  };

  const a = {
    fd:     { v0: $('fd_v0'), v1: $('fd_v1'), tax: $('fd_tax'), exempt: $('fd_exempt') },
    gold:   { v0: $('gold_v0'), v1: $('gold_v1'), tax: $('gold_tax'), exempt: $('gold_exempt') },
    re:     { v0: $('re_v0'), v1: $('re_v1'), tax: $('re_tax'), exempt: $('re_exempt') },
    sensex: { v0: $('sensex_v0'), v1: $('sensex_v1'), tax: $('sensex_tax'), exempt: $('sensex_exempt') }
  };
  const keys = ['fd','gold','re','sensex'];
  const assetNames = {
    fd: 'Fixed Deposit',
    gold: 'Gold (per 10 g)',
    re: 'Real Estate',
    sensex: 'Sensex'
  };
  const resultGrid = $('resultGrid');
  const amountLabel = $('amount_label');

  // ---------- Compute ----------
  function build(){
    // clear error
    f.err.style.display = 'none'; f.err.textContent = '';

    const A  = parseINR(f.amount.value) || 100000;
    const y0 = +f.startYear.value || 0;
    const y1 = +f.endYear.value   || 0;
    const years = y1 - y0;
    const startLabel = y0? String(y0) : 'Start';
    const endLabel = y1? String(y1) : 'End';
    const mobileData = {};

    set('row_y0_label', startLabel);
    set('row_y1_label', endLabel);
    if(amountLabel) amountLabel.textContent = inr(A);

    if(!(years>0)){
      f.err.style.display = 'block';
      f.err.textContent = 'End year must be greater than start year.';
    }

    keys.forEach(k=>{
      const v0 = parseINR(a[k].v0.value);
      const v1 = parseINR(a[k].v1.value);
      const r  = parsePct(a[k].tax.value);
      const ex = parseINR(a[k].exempt.value);
      const base = {
        name: assetNames[k],
        startLabel,
        endLabel,
        start: v0? fmt0.format(v0) : '—',
        end: v1? fmt0.format(v1) : '—',
        cagr: '—',
        final: '—',
        postTax: '—',
        taxPaid: '—',
        times: '—'
      };

      if(!(years>0 && v0>0 && v1>0)){
        mobileData[k] = base;
        return;
      }

      const m = v1 / v0;
      const c = Math.pow(m, 1/years) - 1;
      const F = A * m;
      const gain = Math.max(0, F - A);
      const taxable = Math.max(0, gain - ex);
      const taxAmt = taxable * r;
      const P = Math.max(0, F - taxAmt);
      const times = (m<10? m.toFixed(2) : Math.round(m)) + ' Times';
      base.cagr = fmtPct(c);
      base.final = inr(F);
      base.postTax = inr(P);
      base.taxPaid = inr(taxAmt);
      base.times = times;
      mobileData[k] = base;
    });

    renderResultCards(mobileData);
  }

  function renderResultCards(data){
    if(!resultGrid) return;
    resultGrid.innerHTML = '';
    keys.forEach(key=>{
      const item = data[key];
      if(!item) return;
      const card = document.createElement('article');
      card.className = 'result-card';
      card.innerHTML = `
        <h4>${item.name}</h4>
        <div class="divider"></div>
        <div class="metrics">
          <div class="metric"><span>${item.startLabel}</span><b>${item.start}</b></div>
          <div class="metric"><span>${item.endLabel}</span><b>${item.end}</b></div>
          <div class="metric"><span>CAGR</span><b>${item.cagr}</b></div>
          <div class="metric"><span>₹1 L Becomes</span><b>${item.final}</b></div>
          <div class="metric"><span>Post Tax Value</span><b>${item.postTax}</b></div>
          <div class="metric"><span>Tax Paid</span><b>${item.taxPaid}</b></div>
          <div class="metric"><span>Multiplier</span><b>${item.times}</b></div>
        </div>`;
      resultGrid.appendChild(card);
    });
  }

  // ---------- Events ----------
  document.querySelectorAll('.pill').forEach(p=>{
    p.addEventListener('click', ()=>{ f.amount.value = p.getAttribute('data-amt') || f.amount.value; build(); });
  });

  ids(['amount','startYear','endYear']).forEach(el=> el.addEventListener('input', build));
  f.amount.addEventListener('blur', ()=>{
    const val = parseINR(f.amount.value);
    f.amount.value = val? fmt0.format(val) : '';
  });
  keys.forEach(k=>{
    ['v0','v1','tax','exempt'].forEach(prop=>{
      a[k][prop].addEventListener('input', build);
    });
  });
  // sanitize tax on blur (keeps only digits and dot)
  keys.forEach(k=>{
    a[k].tax.addEventListener('blur', ()=>{
      const cleaned = String(a[k].tax.value||'').replace(/[^0-9.]/g,'');
      a[k].tax.value = cleaned;
      build();
    });
  });
  $('recalc').addEventListener('click', build);
  $('reset').addEventListener('click', ()=>{
    f.amount.value = '1,00,000';
    f.startYear.value = 1979;
    f.endYear.value = 2025;
    f.presets.value = '';
    a.fd.v0.value='100'; a.fd.v1.value='3,447'; a.fd.tax.value=30; a.fd.exempt.value='0';
    a.gold.v0.value='937'; a.gold.v1.value='1,27,340'; a.gold.tax.value=20; a.gold.exempt.value='0';
    a.re.v0.value='700'; a.re.v1.value='2,00,000'; a.re.tax.value=20; a.re.exempt.value='0';
    a.sensex.v0.value='100'; a.sensex.v1.value='82,408'; a.sensex.tax.value=10; a.sensex.exempt.value='1,00,000';
    build();
  });

  f.presets.addEventListener('change', e=>{
    if(e.target.value==='sample_1979_2025'){
      f.startYear.value = 1979; f.endYear.value = 2025;
      a.fd.v0.value='100'; a.fd.v1.value='3,447'; a.fd.tax.value=30; a.fd.exempt.value='0';
      a.gold.v0.value='937'; a.gold.v1.value='1,27,340'; a.gold.tax.value=20; a.gold.exempt.value='0';
      a.re.v0.value='700'; a.re.v1.value='2,00,000'; a.re.tax.value=20; a.re.exempt.value='0';
      a.sensex.v0.value='100'; a.sensex.v1.value='82,408'; a.sensex.tax.value=10; a.sensex.exempt.value='1,00,000';
      build();
    }
  });

  // ---------- First render ----------
  build();
})();
</script>
</body>
</html>
